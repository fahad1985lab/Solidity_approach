<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Simple-Verification.hoareTripleVersfirstprogram</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Simple-Verification.hoareTripleVersfirstprogram.html" class="Module">Simple-Verification.hoareTripleVersfirstprogram</a> <a id="56" class="Keyword">where</a>

<a id="63" class="Keyword">open</a> <a id="68" class="Keyword">import</a> <a id="75" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="85" class="Keyword">renaming</a> <a id="94" class="Symbol">(</a><a id="95" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="99" class="Symbol">to</a> <a id="102" class="Datatype Operator">_≤&#39;_</a> <a id="107" class="Symbol">;</a> <a id="109" href="Data.Nat.Base.html#1801" class="Function Operator">_&lt;_</a> <a id="113" class="Symbol">to</a> <a id="116" class="Function Operator">_&lt;&#39;_</a><a id="120" class="Symbol">)</a>
<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="Data.List.html" class="Module">Data.List</a> <a id="144" class="Keyword">hiding</a> <a id="151" class="Symbol">(</a><a id="152" href="Data.List.Base.html#1954" class="Function Operator">_++_</a><a id="156" class="Symbol">;</a><a id="157" href="Data.List.Base.html#4807" class="Function">and</a><a id="160" class="Symbol">)</a>
<a id="162" class="Keyword">open</a> <a id="167" class="Keyword">import</a> <a id="174" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="183" class="Keyword">open</a> <a id="188" class="Keyword">import</a> <a id="195" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="206" class="Keyword">open</a> <a id="211" class="Keyword">import</a> <a id="218" href="Data.Unit.html" class="Module">Data.Unit</a>  
<a id="230" class="Keyword">open</a> <a id="235" class="Keyword">import</a> <a id="242" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="253" class="Keyword">open</a> <a id="258" class="Keyword">import</a> <a id="265" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="276" class="Keyword">hiding</a> <a id="283" class="Symbol">(</a><a id="284" href="Data.Bool.Base.html#681" class="Datatype Operator">_≤_</a> <a id="288" class="Symbol">;</a> <a id="290" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a> <a id="304" class="Symbol">)</a> <a id="306" class="Keyword">renaming</a> <a id="315" class="Symbol">(</a><a id="316" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="320" class="Symbol">to</a> <a id="323" class="Function Operator">_∧b_</a> <a id="328" class="Symbol">;</a> <a id="330" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="334" class="Symbol">to</a> <a id="337" class="Function Operator">_∨b_</a> <a id="342" class="Symbol">;</a> <a id="344" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="346" class="Symbol">to</a> <a id="349" class="Function">True</a><a id="353" class="Symbol">)</a>
<a id="355" class="Keyword">open</a> <a id="360" class="Keyword">import</a> <a id="367" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="382" class="Keyword">hiding</a> <a id="389" class="Symbol">(</a><a id="390" href="Data.Bool.Base.html#681" class="Datatype Operator">_≤_</a> <a id="394" class="Symbol">;</a> <a id="396" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a> <a id="410" class="Symbol">)</a> <a id="412" class="Keyword">renaming</a> <a id="421" class="Symbol">(</a><a id="422" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="426" class="Symbol">to</a> <a id="429" class="Function Operator">_∧b_</a> <a id="434" class="Symbol">;</a> <a id="436" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="440" class="Symbol">to</a> <a id="443" class="Function Operator">_∨b_</a> <a id="448" class="Symbol">;</a> <a id="450" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="452" class="Symbol">to</a> <a id="455" class="Function">True</a><a id="459" class="Symbol">)</a>
<a id="461" class="Keyword">open</a> <a id="466" class="Keyword">import</a> <a id="473" href="Data.Product.html" class="Module">Data.Product</a> <a id="486" class="Keyword">renaming</a> <a id="495" class="Symbol">(</a><a id="496" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="500" class="Symbol">to</a> <a id="503" class="InductiveConstructor Operator">_,,_</a> <a id="508" class="Symbol">)</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="536" class="Keyword">hiding</a> <a id="543" class="Symbol">(</a><a id="544" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a><a id="547" class="Symbol">)</a>
<a id="549" class="Keyword">import</a> <a id="556" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="594" class="Symbol">as</a> <a id="597" class="Module">Eq</a>
<a id="600" class="Keyword">open</a> <a id="605" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="608" class="Keyword">using</a> <a id="614" class="Symbol">(</a><a id="615" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="618" class="Symbol">;</a> <a id="620" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="624" class="Symbol">;</a> <a id="626" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a><a id="630" class="Symbol">;</a> <a id="632" class="Keyword">module</a> <a id="639" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a><a id="650" class="Symbol">;</a> <a id="652" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="655" class="Symbol">)</a>
<a id="657" class="Keyword">open</a> <a id="662" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a>
<a id="674" class="Keyword">open</a> <a id="679" class="Keyword">import</a> <a id="686" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>

<a id="709" class="Keyword">open</a> <a id="714" class="Keyword">import</a> <a id="721" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html" class="Module">Simple-Model.ledgerversion.Ledger-Simple-Model</a>
<a id="768" class="Keyword">open</a> <a id="773" class="Keyword">import</a> <a id="780" href="Simple-Model.library-simple-model.basicDataStructureWithSimpleModel.html" class="Module">Simple-Model.library-simple-model.basicDataStructureWithSimpleModel</a>
<a id="848" class="Keyword">open</a> <a id="853" class="Keyword">import</a> <a id="860" href="libraries.natCompare.html" class="Module">libraries.natCompare</a>
<a id="881" class="Keyword">open</a> <a id="886" class="Keyword">import</a> <a id="893" href="libraries.logic.html" class="Module">libraries.logic</a>
<a id="909" class="Keyword">open</a> <a id="914" class="Keyword">import</a> <a id="921" href="libraries.hoareTripleLibSimple.html" class="Module">libraries.hoareTripleLibSimple</a>
<a id="952" class="Keyword">open</a> <a id="957" class="Keyword">import</a> <a id="964" href="libraries.emptyLib.html" class="Module">libraries.emptyLib</a>
<a id="983" class="Keyword">open</a> <a id="988" class="Keyword">import</a> <a id="995" href="libraries.boolLib.html" class="Module">libraries.boolLib</a>



<a id="1016" class="Comment">-- simple program transfer 10 from address 0 to address 6  </a>
<a id="transferProg"></a><a id="1076" href="Simple-Verification.hoareTripleVersfirstprogram.html#1076" class="Function">transferProg</a> <a id="1089" class="Symbol">:</a> <a id="1091" href="libraries.hoareTripleLibSimple.html#909" class="Record">RemainingProgram</a>
<a id="1108" href="Simple-Verification.hoareTripleVersfirstprogram.html#1076" class="Function">transferProg</a> <a id="1121" class="Symbol">.</a><a id="1122" href="libraries.hoareTripleLibSimple.html#982" class="Field">prog</a> <a id="1127" class="Symbol">=</a>
        <a id="1137" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1308" class="InductiveConstructor">exec</a> <a id="1142" class="Symbol">(</a><a id="1143" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#546" class="InductiveConstructor">transferc</a> <a id="1153" class="Number">10</a> <a id="1156" class="Number">6</a><a id="1157" class="Symbol">)</a>
        <a id="1167" class="Symbol">λ</a> <a id="1169" href="Simple-Verification.hoareTripleVersfirstprogram.html#1169" class="Bound">_</a> <a id="1171" class="Symbol">→</a> <a id="1173" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1231" class="InductiveConstructor">return</a> <a id="1180" class="Symbol">(</a><a id="1181" href="Simple-Model.library-simple-model.basicDataStructureWithSimpleModel.html#388" class="InductiveConstructor">nat</a> <a id="1185" class="Number">0</a><a id="1186" class="Symbol">)</a>
<a id="1188" href="Simple-Verification.hoareTripleVersfirstprogram.html#1076" class="Function">transferProg</a> <a id="1201" class="Symbol">.</a><a id="1202" href="libraries.hoareTripleLibSimple.html#1013" class="Field">stack</a> <a id="1208" class="Symbol">=</a> <a id="1210" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="1213" href="Simple-Verification.hoareTripleVersfirstprogram.html#1076" class="Function">transferProg</a> <a id="1226" class="Symbol">.</a><a id="1227" href="libraries.hoareTripleLibSimple.html#1041" class="Field">calledAddress</a> <a id="1241" class="Symbol">=</a> <a id="1243" class="Number">0</a>

<a id="1246" class="Comment">-- definition of postcondition</a>
<a id="PostTransfer"></a><a id="1277" href="Simple-Verification.hoareTripleVersfirstprogram.html#1277" class="Function">PostTransfer</a> <a id="1290" class="Symbol">:</a> <a id="1292" href="libraries.hoareTripleLibSimple.html#1612" class="Function">HLPred</a>
<a id="1299" href="Simple-Verification.hoareTripleVersfirstprogram.html#1277" class="Function">PostTransfer</a> <a id="1312" class="Symbol">(</a><a id="1313" href="libraries.hoareTripleLibSimple.html#1268" class="InductiveConstructor">stateEF</a> <a id="1321" href="Simple-Verification.hoareTripleVersfirstprogram.html#1321" class="Bound">led</a> <a id="1325" href="Simple-Verification.hoareTripleVersfirstprogram.html#1325" class="Bound">callingAddress</a><a id="1339" class="Symbol">)</a> <a id="1341" class="Symbol">=</a>
  <a id="1345" class="Symbol">(</a><a id="1346" href="Simple-Verification.hoareTripleVersfirstprogram.html#1321" class="Bound">led</a> <a id="1350" class="Number">6</a> <a id="1352" class="Symbol">.</a><a id="1353" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a> <a id="1360" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1362" class="Number">10</a><a id="1364" class="Symbol">)</a> <a id="1366" href="libraries.logic.html#104" class="Datatype Operator">∧</a> <a id="1368" class="Symbol">(</a><a id="1369" href="Simple-Verification.hoareTripleVersfirstprogram.html#1325" class="Bound">callingAddress</a> <a id="1384" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1386" class="Number">0</a><a id="1387" class="Symbol">)</a>

<a id="1390" class="Comment">-- definition of precondition</a>
<a id="PreTransfer"></a><a id="1420" href="Simple-Verification.hoareTripleVersfirstprogram.html#1420" class="Function">PreTransfer</a> <a id="1432" class="Symbol">:</a> <a id="1434" href="libraries.hoareTripleLibSimple.html#1612" class="Function">HLPred</a>
<a id="1441" href="Simple-Verification.hoareTripleVersfirstprogram.html#1420" class="Function">PreTransfer</a> <a id="1453" class="Symbol">(</a><a id="1454" href="libraries.hoareTripleLibSimple.html#1268" class="InductiveConstructor">stateEF</a> <a id="1462" href="Simple-Verification.hoareTripleVersfirstprogram.html#1462" class="Bound">led</a> <a id="1466" href="Simple-Verification.hoareTripleVersfirstprogram.html#1466" class="Bound">callingAddress</a><a id="1480" class="Symbol">)</a> <a id="1482" class="Symbol">=</a>
            <a id="1496" class="Symbol">(</a><a id="1497" href="Simple-Verification.hoareTripleVersfirstprogram.html#1462" class="Bound">led</a> <a id="1501" class="Number">6</a> <a id="1503" class="Symbol">.</a><a id="1504" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a> <a id="1511" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1513" class="Number">0</a><a id="1514" class="Symbol">)</a> <a id="1516" href="libraries.logic.html#104" class="Datatype Operator">∧</a>
            <a id="1530" class="Symbol">((</a><a id="1532" class="Number">10</a> <a id="1535" href="libraries.natCompare.html#712" class="Function Operator">≦r</a> <a id="1538" href="Simple-Verification.hoareTripleVersfirstprogram.html#1462" class="Bound">led</a> <a id="1542" class="Number">0</a> <a id="1544" class="Symbol">.</a><a id="1545" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a> <a id="1552" class="Symbol">)</a> <a id="1554" href="libraries.logic.html#104" class="Datatype Operator">∧</a>
            <a id="1568" class="Symbol">(</a><a id="1569" href="Simple-Verification.hoareTripleVersfirstprogram.html#1466" class="Bound">callingAddress</a> <a id="1584" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1586" class="Number">0</a><a id="1587" class="Symbol">))</a>



<a id="1593" class="Comment">------ first direction </a>

<a id="proofPreTransferaux1"></a><a id="1618" href="Simple-Verification.hoareTripleVersfirstprogram.html#1618" class="Function">proofPreTransferaux1</a> <a id="1639" class="Symbol">:</a> <a id="1641" class="Symbol">(</a><a id="1642" href="Simple-Verification.hoareTripleVersfirstprogram.html#1642" class="Bound">led1</a> <a id="1647" class="Symbol">:</a> <a id="1649" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1621" class="Function">Ledger</a><a id="1655" class="Symbol">)</a>
    <a id="1661" class="Symbol">(</a><a id="1662" href="Simple-Verification.hoareTripleVersfirstprogram.html#1662" class="Bound">10≦led1-0amount</a> <a id="1678" class="Symbol">:</a> <a id="1680" class="Number">10</a> <a id="1683" href="libraries.natCompare.html#712" class="Function Operator">≦r</a> <a id="1686" href="Simple-Verification.hoareTripleVersfirstprogram.html#1642" class="Bound">led1</a> <a id="1691" class="Number">0</a> <a id="1693" class="Symbol">.</a><a id="1694" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a><a id="1700" class="Symbol">)</a>
    <a id="1706" class="Symbol">(</a><a id="1707" href="Simple-Verification.hoareTripleVersfirstprogram.html#1707" class="Bound">s&#39;</a> <a id="1710" class="Symbol">:</a> <a id="1712" href="libraries.hoareTripleLibSimple.html#1234" class="Record">HLState</a><a id="1719" class="Symbol">)(</a><a id="1721" href="Simple-Verification.hoareTripleVersfirstprogram.html#1721" class="Bound">x</a>  <a id="1724" class="Symbol">:</a> <a id="1726" href="Simple-Verification.hoareTripleVersfirstprogram.html#1642" class="Bound">led1</a> <a id="1731" class="Number">6</a> <a id="1733" class="Symbol">.</a><a id="1734" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a> <a id="1741" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1743" class="Number">0</a><a id="1744" class="Symbol">)</a>
    <a id="1750" class="Symbol">(</a><a id="1751" href="Simple-Verification.hoareTripleVersfirstprogram.html#1751" class="Bound">eq</a> <a id="1754" class="Symbol">:</a> <a id="1756" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#2639" class="Function">updateLedgerAmount</a> <a id="1775" href="Simple-Verification.hoareTripleVersfirstprogram.html#1642" class="Bound">led1</a> <a id="1780" class="Number">0</a> <a id="1782" class="Number">6</a> <a id="1784" class="Number">10</a> <a id="1787" href="Simple-Verification.hoareTripleVersfirstprogram.html#1662" class="Bound">10≦led1-0amount</a> <a id="1803" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1805" href="libraries.hoareTripleLibSimple.html#1288" class="Field">HLState.ledger</a> <a id="1820" href="Simple-Verification.hoareTripleVersfirstprogram.html#1707" class="Bound">s&#39;</a><a id="1822" class="Symbol">)</a>
    <a id="1828" class="Symbol">→</a> <a id="1830" href="libraries.hoareTripleLibSimple.html#1288" class="Field">HLState.ledger</a> <a id="1845" href="Simple-Verification.hoareTripleVersfirstprogram.html#1707" class="Bound">s&#39;</a> <a id="1848" class="Number">6</a> <a id="1850" class="Symbol">.</a><a id="1851" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a> <a id="1858" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1860" class="Number">10</a>
<a id="1863" href="Simple-Verification.hoareTripleVersfirstprogram.html#1618" class="Function">proofPreTransferaux1</a> <a id="1884" href="Simple-Verification.hoareTripleVersfirstprogram.html#1884" class="Bound">led1</a> <a id="1889" href="Simple-Verification.hoareTripleVersfirstprogram.html#1889" class="Bound">10≦led1-0amount</a> <a id="1905" href="Simple-Verification.hoareTripleVersfirstprogram.html#1905" class="Bound">s&#39;</a> <a id="1908" href="Simple-Verification.hoareTripleVersfirstprogram.html#1908" class="Bound">x</a> <a id="1910" href="Simple-Verification.hoareTripleVersfirstprogram.html#1910" class="Bound">eq</a>  <a id="1914" class="Keyword">rewrite</a> <a id="1922" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="1926" href="Simple-Verification.hoareTripleVersfirstprogram.html#1910" class="Bound">eq</a> <a id="1929" class="Symbol">|</a> <a id="1931" href="Simple-Verification.hoareTripleVersfirstprogram.html#1908" class="Bound">x</a> <a id="1933" class="Symbol">=</a> <a id="1935" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="1941" class="Comment">-- prove first direction for precondition</a>

<a id="proofPreTransfer"></a><a id="1984" href="Simple-Verification.hoareTripleVersfirstprogram.html#1984" class="Function">proofPreTransfer</a> <a id="2001" class="Symbol">:</a> <a id="2003" href="libraries.hoareTripleLibSimple.html#2217" class="Function Operator">&lt;</a> <a id="2005" href="Simple-Verification.hoareTripleVersfirstprogram.html#1420" class="Function">PreTransfer</a> <a id="2017" href="libraries.hoareTripleLibSimple.html#2217" class="Function Operator">&gt;solpresimplemodel</a> <a id="2036" href="Simple-Verification.hoareTripleVersfirstprogram.html#1076" class="Function">transferProg</a> <a id="2049" href="libraries.hoareTripleLibSimple.html#2217" class="Function Operator">&lt;</a> <a id="2051" href="Simple-Verification.hoareTripleVersfirstprogram.html#1277" class="Function">PostTransfer</a> <a id="2064" href="libraries.hoareTripleLibSimple.html#2217" class="Function Operator">&gt;</a>
<a id="2066" href="Simple-Verification.hoareTripleVersfirstprogram.html#1984" class="Function">proofPreTransfer</a> <a id="2083" class="Symbol">(</a><a id="2084" href="libraries.hoareTripleLibSimple.html#1268" class="InductiveConstructor">stateEF</a> <a id="2092" href="Simple-Verification.hoareTripleVersfirstprogram.html#2092" class="Bound">led1</a> <a id="2097" class="DottedPattern Symbol">.</a><a id="2098" class="DottedPattern Number">0</a><a id="2099" class="Symbol">)</a> <a id="2101" href="Simple-Verification.hoareTripleVersfirstprogram.html#2101" class="Bound">s&#39;</a> <a id="2104" href="Simple-Verification.hoareTripleVersfirstprogram.html#2104" class="Bound">msg</a> <a id="2108" class="Symbol">(</a><a id="2109" href="libraries.logic.html#134" class="InductiveConstructor">and</a> <a id="2113" href="Simple-Verification.hoareTripleVersfirstprogram.html#2113" class="Bound">x</a> <a id="2115" class="Symbol">(</a><a id="2116" href="libraries.logic.html#134" class="InductiveConstructor">and</a> <a id="2120" href="Simple-Verification.hoareTripleVersfirstprogram.html#2120" class="Bound">10≦led1-0amount</a> <a id="2136" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="2140" class="Symbol">))</a> <a id="2143" class="Symbol">(</a><a id="2144" href="libraries.hoareTripleLibSimple.html#2077" class="InductiveConstructor">step</a> <a id="2149" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="2152" href="Simple-Verification.hoareTripleVersfirstprogram.html#2152" class="Bound">x₃</a><a id="2154" class="Symbol">)</a> <a id="2156" class="Keyword">rewrite</a> <a id="2164" href="libraries.natCompare.html#2427" class="Function">compareleq1</a> <a id="2176" class="Number">10</a> <a id="2179" class="Symbol">(</a><a id="2180" href="Simple-Verification.hoareTripleVersfirstprogram.html#2092" class="Bound">led1</a> <a id="2185" class="Number">0</a> <a id="2187" class="Symbol">.</a><a id="2188" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a><a id="2194" class="Symbol">)</a> <a id="2196" href="Simple-Verification.hoareTripleVersfirstprogram.html#2120" class="Bound">10≦led1-0amount</a>
  <a id="2214" class="Symbol">=</a> <a id="2216" href="libraries.logic.html#134" class="InductiveConstructor">and</a> <a id="2220" class="Symbol">(</a><a id="2221" href="Simple-Verification.hoareTripleVersfirstprogram.html#1618" class="Function">proofPreTransferaux1</a> <a id="2242" href="Simple-Verification.hoareTripleVersfirstprogram.html#2092" class="Bound">led1</a> <a id="2247" href="Simple-Verification.hoareTripleVersfirstprogram.html#2120" class="Bound">10≦led1-0amount</a> <a id="2263" href="Simple-Verification.hoareTripleVersfirstprogram.html#2101" class="Bound">s&#39;</a> <a id="2266" href="Simple-Verification.hoareTripleVersfirstprogram.html#2113" class="Bound">x</a> <a id="2268" class="Symbol">(</a><a id="2269" href="libraries.hoareTripleLibSimple.html#5894" class="Function">efrelLemLedger</a> <a id="2284" href="Simple-Verification.hoareTripleVersfirstprogram.html#2152" class="Bound">x₃</a><a id="2286" class="Symbol">))</a> <a id="2289" class="Symbol">(</a><a id="2290" href="libraries.hoareTripleLibSimple.html#3525" class="Function">efrelLemCallingAddr&#39;</a> <a id="2311" href="Simple-Verification.hoareTripleVersfirstprogram.html#2152" class="Bound">x₃</a><a id="2313" class="Symbol">)</a>



<a id="2318" class="Comment">------ second direction </a>

<a id="proofPreTransfer-solweakestaux"></a><a id="2344" href="Simple-Verification.hoareTripleVersfirstprogram.html#2344" class="Function">proofPreTransfer-solweakestaux</a> <a id="2375" class="Symbol">:</a> <a id="2377" class="Symbol">(</a><a id="2378" href="Simple-Verification.hoareTripleVersfirstprogram.html#2378" class="Bound">led1</a> <a id="2383" href="Simple-Verification.hoareTripleVersfirstprogram.html#2383" class="Bound">led2</a> <a id="2388" class="Symbol">:</a> <a id="2390" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1621" class="Function">Ledger</a><a id="2396" class="Symbol">)(</a><a id="2398" href="Simple-Verification.hoareTripleVersfirstprogram.html#2398" class="Bound">msg</a> <a id="2402" class="Symbol">:</a> <a id="2404" href="Simple-Model.library-simple-model.basicDataStructureWithSimpleModel.html#369" class="Datatype">Msg</a><a id="2407" class="Symbol">)(</a><a id="2409" href="Simple-Verification.hoareTripleVersfirstprogram.html#2409" class="Bound">callingAddress</a> <a id="2424" class="Symbol">:</a> <a id="2426" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="2427" class="Symbol">)(</a><a id="2429" href="Simple-Verification.hoareTripleVersfirstprogram.html#2429" class="Bound">led2==10</a> <a id="2438" class="Symbol">:</a> <a id="2440" href="Simple-Verification.hoareTripleVersfirstprogram.html#2383" class="Bound">led2</a> <a id="2445" class="Number">6</a> <a id="2447" class="Symbol">.</a><a id="2448" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a> <a id="2455" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2457" class="Number">10</a><a id="2459" class="Symbol">)</a> <a id="2461" class="Symbol">(</a><a id="2462" href="Simple-Verification.hoareTripleVersfirstprogram.html#2462" class="Bound">leqp</a> <a id="2467" class="Symbol">:</a> <a id="2469" href="libraries.natCompare.html#1049" class="Datatype">OrderingLeq</a> <a id="2481" class="Number">10</a> <a id="2484" class="Symbol">(</a><a id="2485" href="Simple-Verification.hoareTripleVersfirstprogram.html#2378" class="Bound">led1</a> <a id="2490" class="Number">0</a> <a id="2492" class="Symbol">.</a><a id="2493" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a><a id="2499" class="Symbol">))</a>
                                 <a id="2535" class="Symbol">(</a><a id="2536" href="Simple-Verification.hoareTripleVersfirstprogram.html#2536" class="Bound">x₂</a>   <a id="2541" class="Symbol">:</a> <a id="2543" href="libraries.hoareTripleLibSimple.html#1970" class="Datatype">EFrel</a> <a id="2549" href="Simple-Verification.hoareTripleVersfirstprogram.html#2378" class="Bound">led1</a> <a id="2554" class="Symbol">(</a><a id="2555" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#3375" class="Function">executeTransferAux</a> <a id="2574" href="Simple-Verification.hoareTripleVersfirstprogram.html#2378" class="Bound">led1</a> <a id="2579" href="Simple-Verification.hoareTripleVersfirstprogram.html#2378" class="Bound">led1</a> <a id="2584" class="InductiveConstructor">[]</a> <a id="2587" href="Simple-Verification.hoareTripleVersfirstprogram.html#2409" class="Bound">callingAddress</a> <a id="2602" class="Number">0</a> <a id="2604" class="Number">10</a> <a id="2607" class="Number">6</a>  <a id="2610" class="Symbol">(</a><a id="2611" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1231" class="InductiveConstructor">return</a> <a id="2618" class="Symbol">(</a><a id="2619" class="InductiveConstructor">nat</a> <a id="2623" class="Number">0</a><a id="2624" class="Symbol">))</a> <a id="2627" href="Simple-Verification.hoareTripleVersfirstprogram.html#2462" class="Bound">leqp</a><a id="2631" class="Symbol">)</a>
                                                <a id="2681" class="Symbol">(</a><a id="2682" class="InductiveConstructor">stateEF</a> <a id="2690" href="Simple-Verification.hoareTripleVersfirstprogram.html#2383" class="Bound">led2</a> <a id="2695" class="InductiveConstructor">[]</a> <a id="2698" class="Number">0</a> <a id="2700" class="Number">0</a> <a id="2702" class="Symbol">(</a><a id="2703" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1231" class="InductiveConstructor">return</a> <a id="2710" href="Simple-Verification.hoareTripleVersfirstprogram.html#2398" class="Bound">msg</a><a id="2713" class="Symbol">)))</a>
                                 <a id="2750" class="Symbol">→</a> <a id="2752" class="Symbol">(</a><a id="2753" href="Simple-Verification.hoareTripleVersfirstprogram.html#2378" class="Bound">led1</a> <a id="2758" class="Number">6</a> <a id="2760" class="Symbol">.</a><a id="2761" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a> <a id="2768" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2770" class="Number">0</a><a id="2771" class="Symbol">)</a> <a id="2773" href="libraries.logic.html#104" class="Datatype Operator">∧</a>   <a id="2777" class="Symbol">((</a><a id="2779" class="Number">10</a> <a id="2782" href="libraries.natCompare.html#712" class="Function Operator">≦r</a> <a id="2785" href="Simple-Verification.hoareTripleVersfirstprogram.html#2378" class="Bound">led1</a> <a id="2790" class="Number">0</a> <a id="2792" class="Symbol">.</a><a id="2793" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a><a id="2799" class="Symbol">)</a> <a id="2801" href="libraries.logic.html#104" class="Datatype Operator">∧</a> <a id="2803" class="Symbol">(</a><a id="2804" href="Simple-Verification.hoareTripleVersfirstprogram.html#2409" class="Bound">callingAddress</a> <a id="2819" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2821" class="Number">0</a><a id="2822" class="Symbol">))</a>
<a id="2825" href="Simple-Verification.hoareTripleVersfirstprogram.html#2344" class="Function">proofPreTransfer-solweakestaux</a> <a id="2856" href="Simple-Verification.hoareTripleVersfirstprogram.html#2856" class="Bound">led1</a> <a id="2861" class="DottedPattern Symbol">.(</a><a id="2863" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#2639" class="DottedPattern Function">updateLedgerAmount</a> <a id="2882" href="Simple-Verification.hoareTripleVersfirstprogram.html#2856" class="DottedPattern Bound">led1</a> <a id="2887" class="DottedPattern Number">0</a> <a id="2889" class="DottedPattern Number">6</a> <a id="2891" class="DottedPattern Number">10</a> <a id="2894" href="Simple-Verification.hoareTripleVersfirstprogram.html#2918" class="DottedPattern Bound">x</a><a id="2895" class="DottedPattern Symbol">)</a> <a id="2897" href="Simple-Verification.hoareTripleVersfirstprogram.html#2897" class="Bound">msg</a> <a id="2901" class="DottedPattern Symbol">.</a><a id="2902" class="DottedPattern Number">0</a> <a id="2904" href="Simple-Verification.hoareTripleVersfirstprogram.html#2904" class="Bound">led2==10</a> <a id="2913" class="Symbol">(</a><a id="2914" href="libraries.natCompare.html#1087" class="InductiveConstructor">leq</a> <a id="2918" href="Simple-Verification.hoareTripleVersfirstprogram.html#2918" class="Bound">x</a><a id="2919" class="Symbol">)</a> <a id="2921" class="Symbol">(</a><a id="2922" href="libraries.hoareTripleLibSimple.html#2033" class="InductiveConstructor">reflex</a> <a id="2929" class="DottedPattern Symbol">.(</a><a id="2931" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#2035" class="DottedPattern InductiveConstructor">stateEF</a> <a id="2939" class="DottedPattern Symbol">(</a><a id="2940" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#2639" class="DottedPattern Function">updateLedgerAmount</a> <a id="2959" href="Simple-Verification.hoareTripleVersfirstprogram.html#2856" class="DottedPattern Bound">led1</a> <a id="2964" class="DottedPattern Number">0</a> <a id="2966" class="DottedPattern Number">6</a> <a id="2968" class="DottedPattern Number">10</a> <a id="2971" href="Simple-Verification.hoareTripleVersfirstprogram.html#2918" class="DottedPattern Bound">x</a><a id="2972" class="DottedPattern Symbol">)</a> <a id="2974" href="Agda.Builtin.List.html#184" class="DottedPattern InductiveConstructor">[]</a> <a id="2977" class="DottedPattern Number">0</a> <a id="2979" class="DottedPattern Number">0</a> <a id="2981" class="DottedPattern Symbol">(</a><a id="2982" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1231" class="DottedPattern InductiveConstructor">return</a> <a id="2989" class="DottedPattern Symbol">(</a><a id="2990" href="Simple-Model.library-simple-model.basicDataStructureWithSimpleModel.html#388" class="DottedPattern InductiveConstructor">nat</a> <a id="2994" class="DottedPattern Number">0</a><a id="2995" class="DottedPattern Symbol">)))</a><a id="2998" class="Symbol">)</a>
  <a id="3002" class="Symbol">=</a> <a id="3004" href="libraries.logic.html#134" class="InductiveConstructor">and</a> <a id="3008" class="Symbol">(</a><a id="3009" href="libraries.natCompare.html#5124" class="Function">0+lem=</a> <a id="3016" class="Symbol">(</a><a id="3017" href="Simple-Verification.hoareTripleVersfirstprogram.html#2856" class="Bound">led1</a> <a id="3022" class="Number">6</a> <a id="3024" class="Symbol">.</a><a id="3025" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a><a id="3031" class="Symbol">)</a> <a id="3033" class="Number">10</a> <a id="3036" href="Simple-Verification.hoareTripleVersfirstprogram.html#2904" class="Bound">led2==10</a><a id="3044" class="Symbol">)</a> <a id="3046" class="Symbol">(</a><a id="3047" href="libraries.logic.html#134" class="InductiveConstructor">and</a> <a id="3051" href="Simple-Verification.hoareTripleVersfirstprogram.html#2918" class="Bound">x</a> <a id="3053" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="3057" class="Symbol">)</a>
<a id="3059" href="Simple-Verification.hoareTripleVersfirstprogram.html#2344" class="Function">proofPreTransfer-solweakestaux</a> <a id="3090" href="Simple-Verification.hoareTripleVersfirstprogram.html#3090" class="Bound">led1</a> <a id="3095" href="Simple-Verification.hoareTripleVersfirstprogram.html#3095" class="Bound">led2</a> <a id="3100" href="Simple-Verification.hoareTripleVersfirstprogram.html#3100" class="Bound">msg</a> <a id="3104" href="Simple-Verification.hoareTripleVersfirstprogram.html#3104" class="Bound">callingAddress</a> <a id="3119" href="Simple-Verification.hoareTripleVersfirstprogram.html#3119" class="Bound">led2==10</a> <a id="3128" class="Symbol">(</a><a id="3129" href="libraries.natCompare.html#1125" class="InductiveConstructor">greater</a> <a id="3137" href="Simple-Verification.hoareTripleVersfirstprogram.html#3137" class="Bound">x</a><a id="3138" class="Symbol">)</a> <a id="3140" class="Symbol">(</a><a id="3141" href="libraries.hoareTripleLibSimple.html#2077" class="InductiveConstructor">step</a> <a id="3146" class="Symbol">()</a> <a id="3149" href="Simple-Verification.hoareTripleVersfirstprogram.html#3149" class="Bound">x₂</a><a id="3151" class="Symbol">)</a>



<a id="3156" class="Comment">-- prove second direction for weakestprecondition</a>
<a id="proofPreTransfer-solweakest"></a><a id="3206" href="Simple-Verification.hoareTripleVersfirstprogram.html#3206" class="Function">proofPreTransfer-solweakest</a> <a id="3234" class="Symbol">:</a> <a id="3236" href="libraries.hoareTripleLibSimple.html#2503" class="Function Operator">&lt;</a> <a id="3238" href="Simple-Verification.hoareTripleVersfirstprogram.html#1420" class="Function">PreTransfer</a> <a id="3250" href="libraries.hoareTripleLibSimple.html#2503" class="Function Operator">&gt;solweakestsimplemodel</a> <a id="3273" href="Simple-Verification.hoareTripleVersfirstprogram.html#1076" class="Function">transferProg</a> <a id="3286" href="libraries.hoareTripleLibSimple.html#2503" class="Function Operator">&lt;</a> <a id="3288" href="Simple-Verification.hoareTripleVersfirstprogram.html#1277" class="Function">PostTransfer</a> <a id="3301" href="libraries.hoareTripleLibSimple.html#2503" class="Function Operator">&gt;</a>
<a id="3303" href="Simple-Verification.hoareTripleVersfirstprogram.html#3206" class="Function">proofPreTransfer-solweakest</a>  <a id="3332" class="Symbol">(</a><a id="3333" href="libraries.hoareTripleLibSimple.html#1268" class="InductiveConstructor">stateEF</a> <a id="3341" href="Simple-Verification.hoareTripleVersfirstprogram.html#3341" class="Bound">led1</a> <a id="3346" href="Simple-Verification.hoareTripleVersfirstprogram.html#3346" class="Bound">callingAddress</a><a id="3360" class="Symbol">)</a> <a id="3362" class="Symbol">(</a><a id="3363" href="libraries.hoareTripleLibSimple.html#1268" class="InductiveConstructor">stateEF</a> <a id="3371" href="Simple-Verification.hoareTripleVersfirstprogram.html#3371" class="Bound">led2</a> <a id="3376" class="DottedPattern Symbol">.</a><a id="3377" class="DottedPattern Number">0</a><a id="3378" class="Symbol">)</a> <a id="3380" href="Simple-Verification.hoareTripleVersfirstprogram.html#3380" class="Bound">msg</a> <a id="3384" class="Symbol">(</a><a id="3385" href="libraries.logic.html#134" class="InductiveConstructor">and</a> <a id="3389" href="Simple-Verification.hoareTripleVersfirstprogram.html#3389" class="Bound">x</a> <a id="3391" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="3395" class="Symbol">)</a> <a id="3397" class="Symbol">(</a><a id="3398" href="libraries.hoareTripleLibSimple.html#2077" class="InductiveConstructor">step</a> <a id="3403" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="3406" href="Simple-Verification.hoareTripleVersfirstprogram.html#3406" class="Bound">x₂</a><a id="3408" class="Symbol">)</a>
  <a id="3412" class="Symbol">=</a> <a id="3414" href="Simple-Verification.hoareTripleVersfirstprogram.html#2344" class="Function">proofPreTransfer-solweakestaux</a> <a id="3445" href="Simple-Verification.hoareTripleVersfirstprogram.html#3341" class="Bound">led1</a> <a id="3450" href="Simple-Verification.hoareTripleVersfirstprogram.html#3371" class="Bound">led2</a> <a id="3455" href="Simple-Verification.hoareTripleVersfirstprogram.html#3380" class="Bound">msg</a> <a id="3459" href="Simple-Verification.hoareTripleVersfirstprogram.html#3346" class="Bound">callingAddress</a> <a id="3474" href="Simple-Verification.hoareTripleVersfirstprogram.html#3389" class="Bound">x</a> <a id="3476" class="Symbol">(</a><a id="3477" href="libraries.natCompare.html#2249" class="Function">compareLeq</a> <a id="3488" class="Number">10</a> <a id="3491" class="Symbol">(</a><a id="3492" href="Simple-Verification.hoareTripleVersfirstprogram.html#3341" class="Bound">led1</a> <a id="3497" class="Number">0</a> <a id="3499" class="Symbol">.</a><a id="3500" href="Simple-Model.ledgerversion.Ledger-Simple-Model.html#1495" class="Field">amount</a><a id="3506" class="Symbol">))</a> <a id="3509" href="Simple-Verification.hoareTripleVersfirstprogram.html#3406" class="Bound">x₂</a>


<a id="3514" class="Comment">-- prove both direction precondition and weakestprecondition</a>
<a id="proofTransfer"></a><a id="3575" href="Simple-Verification.hoareTripleVersfirstprogram.html#3575" class="Function">proofTransfer</a> <a id="3589" class="Symbol">:</a> <a id="3591" href="libraries.hoareTripleLibSimple.html#2782" class="Record Operator">&lt;</a> <a id="3593" href="Simple-Verification.hoareTripleVersfirstprogram.html#1420" class="Function">PreTransfer</a> <a id="3605" href="libraries.hoareTripleLibSimple.html#2782" class="Record Operator">&gt;sol</a> <a id="3610" href="Simple-Verification.hoareTripleVersfirstprogram.html#1076" class="Function">transferProg</a> <a id="3623" href="libraries.hoareTripleLibSimple.html#2782" class="Record Operator">&lt;</a> <a id="3625" href="Simple-Verification.hoareTripleVersfirstprogram.html#1277" class="Function">PostTransfer</a> <a id="3638" href="libraries.hoareTripleLibSimple.html#2782" class="Record Operator">&gt;</a>
<a id="3640" href="Simple-Verification.hoareTripleVersfirstprogram.html#3575" class="Function">proofTransfer</a> <a id="3654" class="Symbol">.</a><a id="3655" href="libraries.hoareTripleLibSimple.html#2864" class="Field">precond</a>  <a id="3664" class="Symbol">=</a>  <a id="3667" href="Simple-Verification.hoareTripleVersfirstprogram.html#1984" class="Function">proofPreTransfer</a> 
<a id="3685" href="Simple-Verification.hoareTripleVersfirstprogram.html#3575" class="Function">proofTransfer</a> <a id="3699" class="Symbol">.</a><a id="3700" href="libraries.hoareTripleLibSimple.html#2910" class="Field">weakest</a>  <a id="3709" class="Symbol">=</a>  <a id="3712" href="Simple-Verification.hoareTripleVersfirstprogram.html#3206" class="Function">proofPreTransfer-solweakest</a> 




</pre></body></html>